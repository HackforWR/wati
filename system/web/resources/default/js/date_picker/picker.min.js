
/*!
 * pickadate.js v3.5.0, 2014/04/13
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
(function(a){if(typeof define=="function"&&define.amd){define("picker",["jquery"],a)}else{if(typeof exports=="object"){module.exports=a(require("jquery"))}else{this.Picker=a(jQuery)}}}(function(f){var a=f(window);var d=f(document);var e=f(document.documentElement);function g(y,B,l,q){if(!y){return g}var x=false,w={id:y.id||"P"+Math.abs(~~(Math.random()*new Date()))},u=l?f.extend(true,{},l.defaults,q):q||{},t=f.extend({},g.klasses(),u.klass),n=f(y),m=function(){return this.start()},r=m.prototype={constructor:m,$node:n,start:function(){if(w&&w.start){return r}w.methods={};w.start=true;w.open=false;w.type=y.type;y.autofocus=y==i();y.readOnly=!u.editable;y.id=y.id||w.id;if(y.type!="text"){y.type="text"}r.component=new l(r,u);r.$root=f(g._.node("div",v(),t.picker,'id="'+y.id+'_root" tabindex="0"'));p();if(u.formatSubmit){z()}o();if(u.container){f(u.container).append(r.$root)}else{n.after(r.$root)}r.on({start:r.component.onStart,render:r.component.onRender,stop:r.component.onStop,open:r.component.onOpen,close:r.component.onClose,set:r.component.onSet}).on({start:u.onStart,render:u.onRender,stop:u.onStop,open:u.onOpen,close:u.onClose,set:u.onSet});x=j(r.$root.children()[0]);if(y.autofocus){r.open()}return r.trigger("start").trigger("render")},render:function(C){if(C){r.$root.html(v())}else{r.$root.find("."+t.box).html(r.component.nodes(w.open))}return r.trigger("render")},stop:function(){if(!w.start){return r}r.close();if(r._hidden){r._hidden.parentNode.removeChild(r._hidden)}r.$root.remove();n.removeClass(t.input).removeData(B);setTimeout(function(){n.off("."+w.id)},0);y.type=w.type;y.readOnly=false;r.trigger("stop");w.methods={};w.start=false;return r},open:function(C){if(w.open){return r}n.addClass(t.active);h(y,"expanded",true);setTimeout(function(){r.$root.addClass(t.opened);h(r.$root[0],"hidden",false)},0);if(C!==false){w.open=true;if(x){e.css("overflow","hidden").css("padding-right","+="+c())}r.$root[0].focus();d.on("click."+w.id+" focusin."+w.id,function(D){var E=D.target;if(E!=y&&E!=document&&D.which!=3){r.close(E===r.$root.children()[0])}}).on("keydown."+w.id,function(E){var D=E.keyCode,F=r.component.key[D],G=E.target;if(D==27){r.close(true)}else{if(G==r.$root[0]&&(F||D==13)){E.preventDefault();if(F){g._.trigger(r.component.key.go,r,[g._.trigger(F)])}else{if(!r.$root.find("."+t.highlighted).hasClass(t.disabled)){r.set("select",r.component.item.highlight).close()}}}else{if(f.contains(r.$root[0],G)&&D==13){E.preventDefault();G.click()}}}})}return r.trigger("open")},close:function(C){if(C){r.$root.off("focus.toOpen")[0].focus();setTimeout(function(){r.$root.on("focus.toOpen",A)},0)}n.removeClass(t.active);h(y,"expanded",false);setTimeout(function(){r.$root.removeClass(t.opened+" "+t.focused);h(r.$root[0],"hidden",true)},0);if(!w.open){return r}w.open=false;if(x){e.css("overflow","").css("padding-right","-="+c())}d.off("."+w.id);return r.trigger("close")},clear:function(C){return r.set("clear",null,C)},set:function(E,G,D){var I,H,F=f.isPlainObject(E),C=F?E:{};D=F&&f.isPlainObject(G)?G:D||{};if(E){if(!F){C[E]=G}for(I in C){H=C[I];if(I in r.component.item){if(H===undefined){H=null}r.component.set(I,H,D)}if(I=="select"||I=="clear"){n.val(I=="clear"?"":r.get(I,u.format)).trigger("change")}}r.render()}return D.muted?r:r.trigger("set",C)},get:function(C,E){C=C||"value";if(w[C]!=null){return w[C]}if(C=="valueSubmit"){if(r._hidden){return r._hidden.value}C="value"}if(C=="value"){return y.value}if(C in r.component.item){if(typeof E=="string"){var D=r.component.get(C);return D?g._.trigger(r.component.formats.toString,r.component,[E,D]):""}return r.component.get(C)}},on:function(E,I,D){var G,H,F=f.isPlainObject(E),C=F?E:{};if(E){if(!F){C[E]=I}for(G in C){H=C[G];if(D){G="_"+G}w.methods[G]=w.methods[G]||[];w.methods[G].push(H)}}return r},off:function(){var C,D,E=arguments;for(C=0,namesCount=E.length;C<namesCount;C+=1){D=E[C];if(D in w.methods){delete w.methods[D]}}return r},trigger:function(D,E){var C=function(F){var G=w.methods[F];if(G){G.map(function(H){g._.trigger(H,r,[E])})}};C("_"+D);C(D);return r}};function v(){return g._.node("div",g._.node("div",g._.node("div",g._.node("div",r.component.nodes(w.open),t.box),t.wrap),t.frame),t.holder)}function o(){n.data(B,r).addClass(t.input).attr("tabindex",-1).val(n.data("value")?r.get("select",u.format):y.value);if(!u.editable){n.on("focus."+w.id+" click."+w.id,function(C){C.preventDefault();r.$root[0].focus()}).on("keydown."+w.id,s)}h(y,{haspopup:true,expanded:false,readonly:false,owns:y.id+"_root"})}function p(){r.$root.on({keydown:s,focusin:function(C){r.$root.removeClass(t.focused);C.stopPropagation()},"mousedown click":function(C){var D=C.target;if(D!=r.$root.children()[0]){C.stopPropagation();if(C.type=="mousedown"&&!f(D).is("input, select, textarea, button, option")){C.preventDefault();r.$root[0].focus()}}}}).on({focus:function(){n.addClass(t.target)},blur:function(){n.removeClass(t.target)}}).on("focus.toOpen",A).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var D=f(this),F=D.data(),C=D.hasClass(t.navDisabled)||D.hasClass(t.disabled),E=i();E=E&&(E.type||E.href);if(C||E&&!f.contains(r.$root[0],E)){r.$root[0].focus()}if(!C&&F.nav){r.set("highlight",r.component.item.highlight,{nav:F.nav})}else{if(!C&&"pick" in F){r.set("select",F.pick)}else{if(F.clear){r.clear().close(true)}else{if(F.close){r.close(true)}}}}});h(r.$root[0],"hidden",true)}function z(){var C;if(u.hiddenName===true){C=y.name;y.name=""}else{C=[typeof u.hiddenPrefix=="string"?u.hiddenPrefix:"",typeof u.hiddenSuffix=="string"?u.hiddenSuffix:"_submit"];C=C[0]+y.name+C[1]}r._hidden=f('<input type=hidden name="'+C+'"'+(n.data("value")||y.value?' value="'+r.get("select",u.formatSubmit)+'"':"")+">")[0];n.on("change."+w.id,function(){r._hidden.value=y.value?r.get("select",u.formatSubmit):""});if(u.container){f(u.container).append(r._hidden)}else{n.after(r._hidden)}}function s(D){var C=D.keyCode,E=/^(8|46)$/.test(C);if(C==27){r.close();return false}if(C==32||E||!w.open&&r.component.key[C]){D.preventDefault();D.stopPropagation();if(E){r.clear().close()}else{r.open()}}}function A(C){C.stopPropagation();if(C.type=="focus"){r.$root.addClass(t.focused)}r.open()}return new m()}g.klasses=function(l){l=l||"picker";return{picker:l,opened:l+"--opened",focused:l+"--focused",input:l+"__input",active:l+"__input--active",target:l+"__input--target",holder:l+"__holder",frame:l+"__frame",wrap:l+"__wrap",box:l+"__box"}};function j(l){var m,n="position";if(l.currentStyle){m=l.currentStyle[n]}else{if(window.getComputedStyle){m=getComputedStyle(l)[n]}}return m=="fixed"}function c(){if(e.height()<=a.height()){return 0}var l=f('<div style="visibility:hidden;width:100px" />').appendTo("body");var n=l[0].offsetWidth;l.css("overflow","scroll");var o=f('<div style="width:100%" />').appendTo(l);var m=o[0].offsetWidth;l.remove();return n-m}g._={group:function(o){var l,n="",m=g._.trigger(o.min,o);for(;m<=g._.trigger(o.max,o,[m]);m+=o.i){l=g._.trigger(o.item,o,[m]);n+=g._.node(o.node,l[0],l[1],l[2])}return n},node:function(o,n,l,m){if(!n){return""}n=f.isArray(n)?n.join(""):n;l=l?' class="'+l+'"':"";m=m?" "+m:"";return"<"+o+l+m+">"+n+"</"+o+">"},lead:function(l){return(l<10?"0":"")+l},trigger:function(n,m,l){return typeof n=="function"?n.apply(m,l||[]):n},digits:function(l){return(/\d/).test(l[1])?2:1},isDate:function(l){return{}.toString.call(l).indexOf("Date")>-1&&this.isInteger(l.getDate())},isInteger:function(l){return{}.toString.call(l).indexOf("Number")>-1&&l%1===0},ariaAttr:b};g.extend=function(m,l){f.fn[m]=function(n,p){var o=this.data(m);if(n=="picker"){return o}if(o&&typeof n=="string"){return g._.trigger(o[n],o,[p])}return this.each(function(){var q=f(this);if(!q.data(m)){new g(this,m,l,n)}})};f.fn[m].defaults=l.defaults};function h(m,n,o){if(f.isPlainObject(n)){for(var l in n){k(m,l,n[l])}}else{k(m,n,o)}}function k(l,m,n){l.setAttribute((m=="role"?"":"aria-")+m,n)}function b(o,p){if(!f.isPlainObject(o)){o={attribute:p}}p="";for(var n in o){var l=(n=="role"?"":"aria-")+n,m=o[n];p+=m==null?"":l+'="'+o[n]+'"'}return p}function i(){try{return document.activeElement}catch(l){}}return g}));